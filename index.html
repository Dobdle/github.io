<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <meta name="theme-color" content="#000000">
  <title>Draw Your Sounds — smem</title>
  <link rel="manifest" href="manifest.json">
  <link rel="apple-touch-icon" href="icon-192.png">
  <style>
    /* === RESET & BASE === */
    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
    
    html, body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: #000;
      color: #fff;
      min-height: 100vh;
      -webkit-font-smoothing: antialiased;
    }
    
    /* === UTILITAIRES COULEURS === */
    .text-neutral-400 { color: #a3a3a3; }
    .text-neutral-500 { color: #737373; }
    .text-neutral-600 { color: #525252; }
    .text-neutral-700 { color: #404040; }

    .bg-neutral-800 { background-color: #262626; }
    .border-neutral-800 { border-color: #262626; }
    .border-neutral-900 { border-color: #171717; }
    
    .w-4 { width: 1rem; }
    .w-8 { width: 2rem; }
    .w-16 { width: 4rem; }
    .w-full { width: 100%; }
    .h-full { height: 100%; }
    .h-1 { height: 0.25rem; }
    .h-4 { height: 1rem; }
    .min-h-screen { min-height: 100vh; }
    .max-w-7xl { max-width: 80rem; }
    
    .mx-auto { margin-left: auto; margin-right: auto; }
    .my-4 { margin-top: 1rem; margin-bottom: 1rem; }
    .mt-0 { margin-top: 0; }
    .mt-2 { margin-top: 0.5rem; }
    .mt-4 { margin-top: 1rem; }
    .mt-6 { margin-top: 1.5rem; }
    .mt-12 { margin-top: 3rem; }
    .mb-2 { margin-bottom: 0.5rem; }
    .mb-4 { margin-bottom: 1rem; }
    .mb-8 { margin-bottom: 2rem; }
    .mr-2 { margin-right: 0.5rem; }
    .p-2 { padding: 0.5rem; }
    .p-4 { padding: 1rem; }
    .pt-4 { padding-top: 1rem; }
    .pb-4 { padding-bottom: 1rem; }
    .px-4 { padding-left: 1rem; padding-right: 1rem; }
    .py-2 { padding-top: 0.5rem; padding-bottom: 0.5rem; }
    .space-y-4 > :not([hidden]) ~ :not([hidden]) { margin-top: 1rem; }
    .space-x-4 > :not([hidden]) ~ :not([hidden]) { margin-left: 1rem; }
    
    .text-xs { font-size: 0.75rem; line-height: 1rem; }
    .text-sm { font-size: 0.875rem; line-height: 1.25rem; }
    .text-base { font-size: 1rem; line-height: 1.5rem; }
    .text-xl { font-size: 1.25rem; line-height: 1.75rem; }
    .text-2xl { font-size: 1.5rem; line-height: 2rem; }
    .text-4xl { font-size: 2.25rem; line-height: 2.5rem; }
    .font-sans { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; }
    .font-mono { font-family: 'SFMono-Regular', Consolas, 'Liberation Mono', monospace; }
    .font-light { font-weight: 300; }
    .font-semibold { font-weight: 600; }
    .font-bold { font-weight: 700; }
    .tracking-widest { letter-spacing: 0.1em; }
    .uppercase { text-transform: uppercase; }
    .leading-relaxed { line-height: 1.625; }
    .text-center { text-align: center; }
    .text-left { text-align: left; }
    .text-right { text-align-last: right; }

    .flex { display: flex; }
    .inline-flex { display: inline-flex; }
    .block { display: block; }
    .hidden { display: none; }
    .flex-col { flex-direction: column; }
    .items-start { align-items: flex-start; }
    .items-center { align-items: center; }
    .justify-center { justify-content: center; }
    .justify-between { justify-content: space-between; }
    
    .relative { position: relative; }
    .absolute { position: absolute; }
    .top-0 { top: 0; }
    .left-0 { left: 0; }

    .rounded-md { border-radius: 0.375rem; }
    .rounded-full { border-radius: 9999px; }
    .border { border-width: 1px; }
    .border-b { border-bottom-width: 1px; }
    .ring-2 { box-shadow: 0 0 0 2px #fff; }
    .cursor-pointer { cursor: pointer; }
    .outline-none { outline: 0; }
    
    /* Boutons, Sliders, Toggle Switch, Select styles (CSS Tailwind-like) */
    /* ... (Gardé pour la mise en page React) ... */
    .button-primary {
      background-color: #a3a3a3; 
      color: #000;
      padding: 0.5rem 1rem;
      border-radius: 0.375rem;
      font-weight: 600;
      cursor: pointer;
      transition: background-color 0.15s ease-in-out;
    }
    .button-primary:hover {
      background-color: #d4d4d4;
    }
    
    input[type=range] {
      -webkit-appearance: none;
      width: 100%;
      height: 0.25rem;
      border-radius: 9999px; 
      outline: none;
      transition: background-color 0.15s ease-in-out;
    }
    input[type=range]::-webkit-slider-thumb {
      -webkit-appearance: none;
      appearance: none;
      width: 1rem; 
      height: 1rem; 
      background: #ffffff;
      cursor: pointer;
      border-radius: 9999px; 
      margin-top: -0.375rem; 
      box-shadow: 0 0 0 2px #000;
    }
    
    .toggle-switch {
        position: relative;
        display: inline-block;
        width: 38px;
        height: 22px;
    }
    .toggle-switch input {
        opacity: 0;
        width: 0;
        height: 0;
    }
    .slider {
        position: absolute;
        cursor: pointer;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background-color: #525252;
        transition: .4s;
        border-radius: 22px;
    }
    .slider:before {
        position: absolute;
        content: "";
        height: 16px;
        width: 16px;
        left: 3px;
        bottom: 3px;
        background-color: white;
        transition: .4s;
        border-radius: 50%;
    }
    input:checked + .slider {
        background-color: #a3a3a3; 
    }
    input:checked + .slider:before {
        transform: translateX(16px);
    }

    .custom-select {
      position: relative;
      display: inline-block;
    }
    .custom-select select {
      -webkit-appearance: none;
      -moz-appearance: none;
      appearance: none;
      background-color: #262626;
      color: #fff;
      padding: 0.5rem 2rem 0.5rem 0.75rem;
      border: 1px solid #404040; 
      border-radius: 0.375rem;
      cursor: pointer;
      font-size: 0.875rem;
    }
    .custom-select::after {
      content: '▼';
      position: absolute;
      top: 50%;
      right: 0.5rem;
      transform: translateY(-50%);
      color: #a3a3a3;
      pointer-events: none;
      font-size: 0.75rem;
    }
    
  </style>
</head>
<body>
  
  <div id="app-root">
    <div class="max-w-7xl mx-auto px-4 min-h-screen flex items-center justify-center">
        <p class="text-neutral-500">Chargement de l'application...</p>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/p5@1.4.0/lib/p5.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/three@0.134.0/build/three.min.js"></script>
  <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  
  <script src="draw-to-wavetable-v3.jsx"></script>
  
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const container = document.getElementById('app-root');
      if (container) {
        // Le composant exporté par draw-to-wavetable-v3.jsx est DrawYourSoundsV3 (export default)
        // Note: Si vous utilisez babel/webpack, vous n'auriez pas besoin de cette ligne,
        // mais pour l'exécution directe dans le navigateur, on doit s'assurer que le composant est exposé globalement.
        // Assuming your JSX file defines DrawYourSoundsV3 globally or is transpiled on the fly.
        
        // Montage du composant DrawYourSoundsV3 (présumé globalement disponible après le chargement du JSX)
        // Si le composant n'est pas exposé globalement, cette ligne doit être ajustée.
        // Puisque draw-to-wavetable-v3.jsx utilise 'export default function DrawYourSoundsV3()',
        // nous allons supposer pour une exécution directe que le fichier JS le rend disponible.
        
        // Pour les fichiers JSX chargés directement, la fonction n'est pas toujours dans la portée globale.
        // Puisque vous utilisez un bundler/transpiler externe (ou pas du tout), nous utilisons une astuce
        // pour monter l'application React.
        
        // Nous allons nous assurer que le fichier JSX est bien exécuté.
        // La logique complète est censée être dans 'draw-to-wavetable-v3.jsx'.
        
        // Code de montage standard pour React 18:
        const root = ReactDOM.createRoot(container);
        
        // Le composant DrawYourSoundsV3 doit être disponible dans la portée globale
        // ou être le 'default export' correctement géré.
        // Pour cette configuration simple, on suppose qu'il est accessible.
        // Si 'DrawYourSoundsV3' n'est pas défini, cela indiquera un problème de chargement du JSX.
        if (typeof DrawYourSoundsV3 !== 'undefined') {
            root.render(
                React.createElement(DrawYourSoundsV3, null)
            );
        } else {
            console.error("Le composant DrawYourSoundsV3 n'a pas été trouvé. Le fichier draw-to-wavetable-v3.jsx n'est peut-être pas chargé correctement.");
            container.innerHTML = `<div class="max-w-7xl mx-auto px-4 min-h-screen flex flex-col items-center justify-center">
                <p class="text-xl text-red-500 mb-4">Erreur de Chargement</p>
                <p class="text-neutral-400">Le composant React DrawYourSoundsV3 est introuvable. Vérifiez la console pour plus de détails et assurez-vous que le fichier draw-to-wavetable-v3.jsx est accessible.</p>
            </div>`;
        }
      }
      
      // === Service Worker Registration (Gardé de l'original) ===
      if ('serviceWorker' in navigator) {
        window.addEventListener('load', () => {
          navigator.serviceWorker.register('sw.js')
            .then(reg => console.log('Service Worker registered'))
            .catch(err => console.log('Service Worker registration failed:', err));
        });
      }
    });
  </script>
</body>
</html>
